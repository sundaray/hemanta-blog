@layer components {
  .blog-post h1 {
    @apply text-6xl;
  }

  .blog-post h2 {
    @apply mb-4 mt-12 text-2xl;
  }

  .blog-post h3 {
    @apply mb-4 mt-12 text-xl;
  }

  .blog-post h4 {
    @apply mb-4 mt-12 text-lg;
  }

  .blog-post p {
    @apply mb-6 leading-7 text-neutral-700 last:mb-0;
  }

  .blog-post blockquote {
    @apply font-merriweather my-6 px-6 leading-7 text-neutral-700;
  }

  .blog-post li:has(> ul) > p {
    @apply mb-3;
  }

  .blog-post p a {
    @apply focus-visible:ring-ring text-sky-700 outline-none hover:underline hover:underline-offset-4 focus-visible:ring-2 focus-visible:ring-offset-2;
  }

  .blog-post ul,
  .blog-post ol {
    @apply marker:text-muted-foreground mb-6 space-y-3 pl-8 text-neutral-700 last:mb-0;
  }

  .blog-post ol ul,
  .blog-post ul ul {
    @apply pl-4 text-neutral-700;
  }

  .blog-post ul {
    @apply list-disc;
  }
  .blog-post ol {
    @apply list-decimal;
  }

  .blog-post :not(pre) > code {
    @apply border-input text-foreground rounded-sm border bg-neutral-200/40 px-1 py-0.5 font-mono text-sm dark:bg-neutral-800;
  }

  .blog-post strong {
    @apply font-semibold;
  }

  .blog-post figure {
    @apply my-6;
  }

  .blog-post :where(h1, h2, h3, h4, h5, h6) {
    @apply relative scroll-mt-20;
  }

  .blog-post .anchor {
    @apply text-muted-foreground hover:text-foreground absolute -left-8 top-1/2 -translate-y-1/2 translate-x-2 cursor-pointer rounded-md p-1 opacity-0 transition-all duration-200;
  }

  .blog-post :where(h1, h2, h3, h4, h5, h6):hover .anchor {
    @apply translate-x-0 opacity-100;
  }

  /*
 * Code snippet styles
 * ============================================
 */

  .blog-post [data-rehype-pretty-code-figure] {
    @apply border-input rounded-lg border;
  }

  .blog-post [data-rehype-pretty-code-figure] [data-rehype-pretty-code-title] {
    @apply text-foreground flex-1 rounded-t-lg py-3.5 pl-5 text-xs;
  }

  .blog-post [data-rehype-pretty-code-figure] pre {
    @apply overflow-x-auto rounded-b-lg rounded-t-none bg-white font-mono;
  }

  .blog-post [data-rehype-pretty-code-figure] pre:focus-visible {
    @apply ring-offset-background ring-ring outline-none ring-2 ring-offset-2;
  }

  .blog-post [data-rehype-pretty-code-figure] code {
    @apply text-[14px];
  }

  .blog-post [data-rehype-pretty-code-figure] [data-line] {
    @apply block border-l-2 border-transparent px-4 first:pt-4 last:pb-4;
  }

  .blog-post [data-rehype-pretty-code-figure] [data-highlighted-line] {
    @apply border-l-2 border-l-sky-600 bg-sky-100/80;
  }

  .blog-post [data-rehype-pretty-code-figure] code[data-line-numbers] {
    counter-reset: line;
  }

  .blog-post
    [data-rehype-pretty-code-figure]
    code[data-line-numbers]
    [data-line]::before {
    @apply border-input mr-4 inline-block w-[2rem] border-r pr-4 text-right text-neutral-400;
    counter-increment: line;
    content: counter(line);
  }

  .blog-post [data-rehype-pretty-code-figure] [data-highlighted-chars] {
    @apply rounded bg-purple-400/30 px-1 py-0.5;
  }

  /* --- Shiki dynamic styles --- */
  pre.shiki {
    background-color: var(--shiki-light-bg);
  }
  .dark pre.shiki {
    background-color: var(--shiki-dark-bg);
  }
  code[data-theme] span {
    color: var(--shiki-light);
  }
  .dark code[data-theme] span {
    color: var(--shiki-dark);
  }
}

.blog-post .twoslash-popup-container {
  @apply bg-accent translate-y-[10px] rounded-md border shadow-lg;
}

.blog-post .twoslash-popup-container .twoslash-popup-code {
  @apply bg-accent rounded-md border-0;
}
.blog-post .twoslash-popup-container .twoslash-popup-code pre {
  @apply bg-accent rounded-md;
}
.blog-post .twoslash-popup-container .twoslash-popup-docs {
  @apply rounded-b-md border-t bg-none;
}

.blog-post .twoslash-popup-container .twoslash-popup-code [data-line] {
  @apply inline;
}

.blog-post .twoslash-hover.twoslash-query-presisted {
  @apply mb-8 inline-block;
}

.blog-post .twoslash-hover.twoslash-query-presisted .twoslash-popup-arrow {
  @apply bg-accent;
}

.blog-post .twoslash-highlighted {
  @apply rounded-none border-0 border-b-[1.5px] border-sky-700 bg-transparent py-1;
}

.blog-post .twoslash-completion-cursor .twoslash-completion-list {
  @apply bg-accent rounded-md border;
}
